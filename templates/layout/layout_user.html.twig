{% extends 'base.html.twig' %}

{% block title %}{{ page_title }} | {{ page_prefix }} {% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('user_app') }}
{% endblock %}

{% block body %}
    {% include "layout/components/page-loader.html.twig" %}

    <div class="body">
        <nav>
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="{{ path('user_homepage') }}">
                        <img src="{{ asset('build/user/images/logo.png') }}" alt="Logo societe">
                    </a>
                </div>

                <div class="nav-mobile">
                    <span class="icon-menu"></span>
                </div>

                <div class="nav-content">
                    <div class="nav-header">
                        <div class="avatar">
                            {% if app.user.avatarFile %}
                                <img src="{{ app.user.avatarFile }}" alt="Avatar utilisateur">
                            {% else %}
                                <div class="avatar-letter">{{ app.user.lastname | slice(0, 1) }}{{ app.user.firstname | slice(0,1) }}</div>
                            {% endif %}
                        </div>
                        <div class="nav-header-infos">
                            <div>{{ app.user.userIdentifier }}</div>
                            <div>{{ app.user.email }}</div>
                        </div>
                        <div class="nav-header-actions">
                            <div id="notifs_list">
                                {% include "layout/components/admin/loaders/btn-icon.html.twig" %}
                            </div>
                            <a href="{{ path('app_logout') }}" class="btn-icon btn-icon-outline-default">
                                <span class="icon-logout"></span>
                                <span class="tooltip" style="width: 108px;">Se d√©connecter</span>
                            </a>
                        </div>
                    </div>

                    <div class="nav-menu">
                        <div class="nav-items">
                            {% for item in menu %}
                                <a class="nav-item {{- app.request.get('_route') in item.matchRoute ? " active" : "" -}}"
                                   href="{{ item.path }}"
                                >
                                    <span class="icon-{{ item.icon }}"></span>
                                    <span>{{ item.name }}</span>
                                </a>
                            {% endfor %}
                        </div>
                        <div class="nav-items">
                            {% for item in menu_bottom %}
                                <a class="nav-item {{- app.request.get('_route') in item.matchRoute ? " active" : "" -}}"
                                   href="{{ item.path }}"
                                >
                                    <span class="icon-{{ item.icon }}"></span>
                                    <span>{{ item.name }}</span>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                </div>

            </div>
        </nav>

        <main class="{{ full_width is defined ? 'full-width' : '' }}">
            {% block breadcrumb %}
                {% include "user/layout/components/breadcrumbs.html.twig" %}
            {% endblock %}

            {% if page_title is defined %}
                {% include "layout/components/admin/page_title.html.twig" %}
            {% endif %}
            <div>
                {% block main_content %}{% endblock %}
            </div>
        </main>
    </div>

    {% block footer %}{% endblock %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('user_app') }}
{% endblock %}
