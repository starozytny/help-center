{% extends 'user/pages/tutorials/products/template.html.twig' %}

{% block main_content_in %}
    <div class="flex flex-col gap-12">
        <section>
            <h2 class="{{ style_article_title }}">Prérequis</h2>
            <div class="{{ style_article_content }}">
                <ul class="space-y-2">
                    <li class="flex items-start">
                        <span class="icon-record text-green-500 mt-1 mr-3"></span>
                        <span class="text-gray-700">Accès au <a href="https://logilink.fr:2083/" target="_blank" class="text-blue-500 underline hover:text-blue-700">CPanel de Logilink</a></span>
                    </li>
                    <li class="flex items-start">
                        <span class="icon-record text-green-500 mt-1 mr-3"></span>
                        <span class="text-gray-700">Accès au réseau local \\192.168.0.99\Ultimmo</span>
                    </li>
                </ul>
            </div>
        </section>
        <section>
            <h2 class="{{ style_article_title }}">Étape 1 : Terminal SSH</h2>
            <div class="{{ style_article_content }}">
                <p>
                    Ouvrir un terminal pour se connecter en SSH au serveur.
                </p>

                <div class="bg-gray-900 rounded-lg overflow-hidden shadow-lg">
                    <div class="flex items-center bg-gray-800 px-4 py-2 border-b border-gray-700">
                        <span class="text-gray-300 text-sm font-medium">Terminal</span>
                    </div>
                    <pre class="p-4 text-sm"><code><span class="text-blue-400">ssh </span><span class="text-slate-50">logilink@192.168.0.98</span></code></pre>
                </div>

                <div class="bg-red-100 border-l-4 border-red-500 p-4 mt-4 rounded-r-lg">
                    <div class="flex items-start">
                        <i class="fas fa-exclamation-triangle text-red-500 mt-1 mr-3"></i>
                        <div>
                            <h4 class="font-semibold text-red-900 mb-1">Mot de passe</h4>
                            <div class="text-red-800 text-sm mt-4">
                                <div>
                                    <span class="font-medium">Dossier</span> : \\192.168.0.99\Ultimmo\Aide en ligne\Logilink
                                </div>
                                <div>
                                    <span class="font-medium">Fichier</span> : Mise-a-jour-des-certificats-Mattermost-Gitlab_version_2.doxc
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section>
            <h2 class="{{ style_article_title }}">Étape 2 : Mattermost</h2>
            <div class="{{ style_article_content }}">
                <p>Mise à jour du certificat pour Mattermost, lire complétement le guide avant de vous lancer.</p>

                <ol class="space-y-4">
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">1</span>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-1">Préparation au changement du DNS</h3>
                            <p class="text-gray-700">
                                - Dans le <a href="https://logilink.fr:2083/" target="_blank" class="text-blue-500 underline hover:text-blue-700">CPanel de Logilink</a>,
                                rendez-vous sur le module <i>Zone Editor</i>.
                                <br>
                                - Cliquez sur <i>Gérer</i>.
                                <br>
                                - Recherchez l'entrée : <i>_acme-challenge.mattermost.logilink.fr.</i> <span class="text-red-500 text-xs">(ne pas prendre le www)</span>
                            </p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">2</span>
                        <div class="w-full">
                            <h3 class="font-semibold text-gray-900 mb-1">Récupération du texte DNS</h3>
                            <div class="w-full bg-gray-900 rounded-lg overflow-hidden shadow-lg">
                                <div class="flex items-center bg-gray-800 px-4 py-2 border-b border-gray-700">
                                    <span class="text-gray-300 text-sm font-medium">Terminal</span>
                                </div>
                                <div class="p-4 text-sm text-red-500 italic">
                                    ⚠️ Après avoir lancé la commande, n'appuyez pas tout de suite sur ENTER, suivez le reste du guide.
                                </div>
                                <pre class="px-4 pt-2 pb-4 text-sm"><code><span class="text-blue-400">sudo certbot </span><span class="text-slate-50">certonly --manual -d mattermost.logilink.fr --preferred-challenges dns</span></code></pre>
                            </div>
                            <p class="text-gray-700 mt-4">Copiez-coller le texte DNS dans le CPanel, dans l'entrée, colonne <i>Enregistrement</i>.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">3</span>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-1">Patienter 1 min</h3>
                            <p class="text-gray-700">Patientez le temps que le DSN se propage.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">4</span>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-1">Valider la commande</h3>
                            <p class="text-gray-700">Maintenant, vous pouvez appuyer sur <b>ENTER</b> dans le terminal.</p>
                        </div>
                    </li>
                </ol>
            </div>
        </section>
        <section>
            <h2 class="{{ style_article_title }}">Étape 3 : Gitlab</h2>
            <div class="{{ style_article_content }}">
                <p>Mise à jour du certificat pour Gitlab, lire complétement le guide avant de vous lancer.</p>

                <ol class="space-y-4">
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">1</span>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-1">Préparation au changement du DNS</h3>
                            <p class="text-gray-700">
                                - Dans le <a href="https://logilink.fr:2083/" target="_blank" class="text-blue-500 underline hover:text-blue-700">CPanel de Logilink</a>,
                                rendez-vous sur le module <i>Zone Editor</i>.
                                <br>
                                - Cliquez sur <i>Gérer</i>.
                                <br>
                                - Recherchez l'entrée : <i>_acme-challenge.gitlab.logilink.fr.</i> <span class="text-red-500 text-xs">(ne pas prendre le www)</span>
                            </p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">2</span>
                        <div class="w-full">
                            <h3 class="font-semibold text-gray-900 mb-1">Récupération du texte DNS</h3>
                            <div class="w-full bg-gray-900 rounded-lg overflow-hidden shadow-lg">
                                <div class="flex items-center bg-gray-800 px-4 py-2 border-b border-gray-700">
                                    <span class="text-gray-300 text-sm font-medium">Terminal</span>
                                </div>
                                <div class="p-4 text-sm text-red-500 italic">
                                    ⚠️ Après avoir lancé la commande, n'appuyez pas tout de suite sur ENTER, suivez le reste du guide.
                                </div>
                                <pre class="px-4 py-2 text-sm"><code><span class="text-blue-400">sudo certbot </span><span class="text-slate-50">certonly --manual -d gitlab.logilink.fr --preferred-challenges dns</span></code></pre>
                                <div class="pb-4 px-4 text-sm text-gray-400 italic pl-8">
                                    - Réponse pour update la key existante : choisir (<b>K</b>)eep
                                </div>
                            </div>
                            <p class="text-gray-700 mt-4">Copiez-coller le texte DNS dans le CPanel, dans l'entrée, colonne <i>Enregistrement</i>.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">3</span>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-1">Patienter 1 min</h3>
                            <p class="text-gray-700">Patientez le temps que le DSN se propage.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-green-200 text-green-600 font-bold text-sm mr-4 flex-shrink-0">4</span>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-1">Valider la commande</h3>
                            <p class="text-gray-700">Maintenant, vous pouvez appuyer sur <b>ENTER</b> dans le terminal.</p>
                        </div>
                    </li>
                </ol>
            </div>
        </section>

        <section>
            <h2 class="{{ style_article_title }}">Étape 4 : Valider les certificats</h2>
            <div class="{{ style_article_content }}">
                <p>
                    Lancer la commande dans le terminal SSH pour que les certificats soient pris en compte.
                </p>

                <div class="bg-gray-900 rounded-lg overflow-hidden shadow-lg">
                    <div class="flex items-center bg-gray-800 px-4 py-2 border-b border-gray-700">
                        <span class="text-gray-300 text-sm font-medium">Terminal</span>
                    </div>
                    <pre class="p-4 text-sm"><code><span class="text-blue-400">sudo service  </span><span class="text-slate-50">apache2 reload</span></code></pre>
                </div>
            </div>
        </section>
    </div>
{% endblock %}
